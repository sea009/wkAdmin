<extend name="Global:base"/>
<block name="style">
</block>
<block name="script">

</block>
<block name="main">
    <div class="codeView ml-10 mt-10 pretty-area radius">
        <a class="btn radius btn-primary" onclick="layer_show('800','','添加部门','<{:U('Access-departmentAdd')}>')" href="javascript:;">
            <i class="icon-plus"></i>
            添加部门
        </a>
        <form action="Admin-Access-departmentModif" method="post">
            <table class="table table-border table-bordered table-striped table-bg table-hover">
                <tr>
                    <th>序号</th>
                    <th>部门名</th>
                    <th>部门代码</th>
                    <th>排序值</th>
                    <th>状态</th>
                    <th>操作</th>
                </tr>
                <volist name="dpList" id="d1">
                    <tr id="<{$d1.id}>">
                        <td><{$d1.id}></td>
                        <td class="changeCol" colName="name"><{$d1.name}></td>
                        <td class="changeCol" colName="code"><{$d1.code}></td>
                        <td class="changeCol" colName="sort"><{$d1.sort}></td>
                        <td><if condition="$d1['status'] eq 1">删除<else />显示</if></td>
                        <td class="td">
                            <a class="btn radius btn-primary" onclick="layer_show('800','','修改部门信息','<{:U('Access-departmentModif')}>?id=<{$d1.id}>')" href="javascript:;">
                                <i class="icon-plus"></i>
                                修改
                            </a>
                            <if condition="$d1['status'] eq 0">
                                <a class="btn radius btn-danger" href="javascript:if(window.confirm('确认删除?')){window.location.href='<{:U('Access/departmentDel',array('id'=>$d1['id']))}>'}">删除</a>
                            <else />
                                <a class="btn radius btn-danger" href="javascript:if(window.confirm('确认恢复?')){window.location.href='<{:U('Access/departmentDel',array('id'=>$d1['id']))}>'}">恢复</a>
                            </if>
                        </td>
                    </tr>
                    <volist name="d1['son']" id="d2">
                        <tr id="<{$d2.id}>">
                            <td><{$d2.id}></td>
                            <td class="changeCol" colName="name">&nbsp;&nbsp;&nbsp;&nbsp;<{$d2.name}></td>
                            <td class="changeCol" colName="code"><{$d2.code}></td>
                            <td class="changeCol" colName="sort"><{$d2.sort}></td>
                            <td><if condition="$d2['status'] eq 1">删除<else />显示</if></td>
                            <td class="td">
                                <a href="javascript:void(0);" class="btn radius btn-info" id="edit<{$d2.id}>" onclick="editMes(<{$d2.id}>)" >修改</a>
                                
                                <if condition="$d1['status'] eq 0">
                                    <a class="btn radius btn-danger" href="javascript:if(window.confirm('确认删除?')){window.location.href='<{:U('Access/departmentDel',array('id'=>$d2['id']))}>'}">删除</a>
                                <else />
                                    <a class="btn radius btn-danger" href="javascript:if(window.confirm('确认恢复?')){window.location.href='<{:U('Access/departmentDel',array('id'=>$d2['id']))}>'}">恢复</a>
                                </if>
                            </td>
                        </tr>
                    </volist>
                </volist>
            </table>
        </form>
    </div>
    <div id="ajaxModal" class="modal hide fade" tabindex="-1" data-width="730"></div>
</block>
